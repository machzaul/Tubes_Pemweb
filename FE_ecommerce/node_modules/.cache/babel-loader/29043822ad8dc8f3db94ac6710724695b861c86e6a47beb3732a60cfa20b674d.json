{"ast":null,"code":"var _jsxFileName = \"D:\\\\semester 6\\\\pemweb\\\\Tubes Pemweb\\\\FE_ecommerce\\\\src\\\\pages\\\\Checkout.js\",\n  _s2 = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport useAlert from \"../hooks/useAlert\"; // Sesuaikan path\nimport AlertContainer from \"../components/ui/Alert\"; // Sesuaikan path\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Checkout = () => {\n  _s2();\n  var _s = $RefreshSig$();\n  const [cart, setCart] = useState([]);\n  const [products, setProducts] = useState([]); // Products from backend\n  const [stockErrors, setStockErrors] = useState([]); // Track stock validation errors\n  const [customerInfo, setCustomerInfo] = useState({\n    fullName: \"\",\n    email: \"\",\n    address: \"\",\n    phoneNumber: \"\"\n  });\n  const [loading, setLoading] = useState(false);\n  const navigate = useNavigate();\n\n  // Gunakan alert hook\n  const {\n    alerts,\n    showSuccess,\n    showError,\n    showWarning,\n    showInfo,\n    removeAlert\n  } = useAlert();\n  const API_BASE_URL = 'http://localhost:6543/api'; // Adjust to your backend URL\n\n  // Fungsi untuk copy ke clipboard\n  const copyToClipboard = async text => {\n    try {\n      await navigator.clipboard.writeText(text);\n      showSuccess(\"Order ID copied to clipboard!\", \"Copied!\");\n    } catch (err) {\n      // Fallback untuk browser yang tidak support clipboard API\n      const textArea = document.createElement('textarea');\n      textArea.value = text;\n      document.body.appendChild(textArea);\n      textArea.select();\n      document.execCommand('copy');\n      document.body.removeChild(textArea);\n      showSuccess(\"Order ID copied to clipboard!\", \"Copied!\");\n    }\n  };\n  useEffect(() => {\n    const storedCart = JSON.parse(localStorage.getItem(\"cart\")) || [];\n    setCart(storedCart);\n\n    // Redirect if cart is empty\n    if (storedCart.length === 0) {\n      showWarning(\"Please add some products to your cart first.\", \"Cart is Empty\");\n      setTimeout(() => {\n        navigate(\"/products\");\n      }, 2000);\n      return;\n    }\n\n    // Fetch products from backend\n    fetchProducts();\n  }, [navigate]);\n\n  // Fetch products from backend\n  const fetchProducts = async () => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/products`);\n      if (!response.ok) {\n        throw new Error('Failed to fetch products');\n      }\n      const data = await response.json();\n      setProducts(data.products);\n\n      // Validate cart stock after fetching products\n      const storedCart = JSON.parse(localStorage.getItem(\"cart\")) || [];\n      validateCartStock(storedCart, data.products);\n    } catch (error) {\n      console.error('Error fetching products:', error);\n      showError('Error fetching product information. Please try again.', 'Network Error');\n    }\n  };\n\n  // Validate cart items against available stock\n  const validateCartStock = (cartItems, backendProducts) => {\n    const errors = [];\n    cartItems.forEach(cartItem => {\n      const backendProduct = backendProducts.find(p => p.id === cartItem.id);\n      if (!backendProduct) {\n        errors.push({\n          id: cartItem.id,\n          title: cartItem.title,\n          message: \"Product is no longer available\"\n        });\n      } else if (cartItem.quantity > backendProduct.stock) {\n        errors.push({\n          id: cartItem.id,\n          title: cartItem.title,\n          requestedQty: cartItem.quantity,\n          availableStock: backendProduct.stock,\n          message: `Only ${backendProduct.stock} items available (you have ${cartItem.quantity} in cart)`\n        });\n      }\n    });\n    setStockErrors(errors);\n    if (errors.length > 0) {\n      showWarning(\"Some items in your cart have stock issues. Please review them before checkout.\", \"Stock Issues Detected\");\n    }\n  };\n\n  // Fix cart quantities to match available stock\n  const fixCartQuantities = () => {\n    const updatedCart = cart.map(cartItem => {\n      const backendProduct = products.find(p => p.id === cartItem.id);\n      if (backendProduct && cartItem.quantity > backendProduct.stock) {\n        return {\n          ...cartItem,\n          quantity: backendProduct.stock\n        };\n      }\n      return cartItem;\n    }).filter(cartItem => {\n      // Remove items that are no longer available\n      const backendProduct = products.find(p => p.id === cartItem.id);\n      return backendProduct && backendProduct.stock > 0;\n    });\n    setCart(updatedCart);\n    localStorage.setItem(\"cart\", JSON.stringify(updatedCart));\n\n    // Re-validate after fixing\n    validateCartStock(updatedCart, products);\n    if (updatedCart.length === 0) {\n      showError(\"All items in your cart are out of stock. Redirecting to products page.\", \"No Available Items\");\n      setTimeout(() => {\n        navigate(\"/products\");\n      }, 3000);\n    } else {\n      showSuccess(\"Cart quantities have been adjusted to match available stock.\", \"Cart Updated\");\n    }\n  };\n\n  // Update cart item quantity with stock validation\n  const updateCartQuantity = (productId, newQuantity) => {\n    const backendProduct = products.find(p => p.id === productId);\n    if (!backendProduct) {\n      showError(\"This product is no longer available.\", \"Product Unavailable\");\n      return;\n    }\n    if (newQuantity > backendProduct.stock) {\n      showWarning(`Sorry, only ${backendProduct.stock} items are available in stock.`, \"Insufficient Stock\");\n      return;\n    }\n    if (newQuantity <= 0) {\n      // Remove item from cart\n      const updatedCart = cart.filter(item => item.id !== productId);\n      setCart(updatedCart);\n      localStorage.setItem(\"cart\", JSON.stringify(updatedCart));\n      validateCartStock(updatedCart, products);\n      showInfo(\"Item removed from cart.\", \"Item Removed\");\n      return;\n    }\n    const updatedCart = cart.map(item => item.id === productId ? {\n      ...item,\n      quantity: newQuantity\n    } : item);\n    setCart(updatedCart);\n    localStorage.setItem(\"cart\", JSON.stringify(updatedCart));\n    validateCartStock(updatedCart, products);\n  };\n\n  // Calculate subtotal and total\n  const calculateSubtotal = () => {\n    return cart.reduce((total, item) => total + item.price * item.quantity, 0).toFixed(2);\n  };\n  const shippingCost = 0;\n  const totalCost = (parseFloat(calculateSubtotal()) + shippingCost).toFixed(2);\n  const handleInputChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setCustomerInfo(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n\n  // Generate unique order ID\n  const generateOrderId = () => {\n    const timestamp = Date.now().toString();\n    const random = Math.random().toString(36).substr(2, 9);\n    return `ORD-${timestamp.substr(-8)}-${random.toUpperCase()}`;\n  };\n\n  // Update product stock in backend\n  const updateProductStock = async (productId, newStock) => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/products/${productId}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          stock: newStock\n        })\n      });\n      if (!response.ok) {\n        throw new Error('Failed to update product stock');\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('Error updating product stock:', error);\n      throw error;\n    }\n  };\n\n  // Create order in backend\n  const createOrder = async orderData => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/orders`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(orderData)\n      });\n      if (!response.ok) {\n        throw new Error('Failed to create order');\n      }\n      return await response.json();\n    } catch (error) {\n      console.error('Error creating order:', error);\n      throw error;\n    }\n  };\n  const handlePlaceOrder = async e => {\n    e.preventDefault();\n\n    // Check if there are any stock errors\n    if (stockErrors.length > 0) {\n      showError(\"Please resolve stock issues before placing your order. Use the 'Fix Cart' button to automatically adjust quantities.\", \"Stock Issues Detected\");\n      return;\n    }\n\n    // Validate form\n    if (!customerInfo.fullName || !customerInfo.email || !customerInfo.address || !customerInfo.phoneNumber) {\n      showWarning(\"Please fill in all required fields.\", \"Incomplete Information\");\n      return;\n    }\n    setLoading(true);\n    showInfo(\"Processing your order...\", \"Please Wait\");\n    try {\n      // Final stock validation before placing order\n      const response = await fetch(`${API_BASE_URL}/products`);\n      if (!response.ok) {\n        throw new Error('Failed to fetch current stock');\n      }\n      const {\n        products: currentProducts\n      } = await response.json();\n      const finalValidation = [];\n      cart.forEach(cartItem => {\n        const currentProduct = currentProducts.find(p => p.id === cartItem.id);\n        if (!currentProduct || cartItem.quantity > currentProduct.stock) {\n          finalValidation.push(cartItem.title);\n        }\n      });\n      if (finalValidation.length > 0) {\n        showError(`Stock has changed for: ${finalValidation.join(', ')}. Please refresh and try again.`, \"Stock Changed\");\n        setTimeout(() => {\n          window.location.reload();\n        }, 3000);\n        return;\n      }\n\n      // Generate unique order ID\n      const orderId = generateOrderId();\n\n      // Prepare order data for backend\n      const orderData = {\n        orderId: orderId,\n        customerInfo: {\n          fullName: customerInfo.fullName,\n          email: customerInfo.email,\n          address: customerInfo.address,\n          phoneNumber: customerInfo.phoneNumber\n        },\n        items: cart.map(item => ({\n          id: item.id,\n          title: item.title,\n          quantity: item.quantity,\n          price: item.price\n        })),\n        subtotal: parseFloat(calculateSubtotal()),\n        shipping: shippingCost,\n        total: parseFloat(totalCost),\n        status: 'pending',\n        statusHistory: [{\n          status: 'pending',\n          timestamp: new Date().toISOString(),\n          updatedBy: 'system',\n          note: 'Order placed by customer'\n        }]\n      };\n\n      // Create order in backend\n      const createdOrder = await createOrder(orderData);\n\n      // Update product stock for each item in the cart\n      const stockUpdatePromises = cart.map(async cartItem => {\n        const currentProduct = currentProducts.find(p => p.id === cartItem.id);\n        if (currentProduct) {\n          const newStock = currentProduct.stock - cartItem.quantity;\n          return updateProductStock(cartItem.id, newStock);\n        }\n      });\n\n      // Wait for all stock updates to complete\n      await Promise.all(stockUpdatePromises);\n\n      // Clear cart from localStorage\n      localStorage.removeItem(\"cart\");\n\n      // Show success alert with copy feature\n      const finalOrderId = createdOrder.orderId || orderId;\n      showOrderSuccessAlert(finalOrderId);\n      setTimeout(() => {\n        navigate(\"/orders\");\n      }, 5000);\n    } catch (error) {\n      console.error('Error placing order:', error);\n      showError('Failed to place order. Please try again.', 'Order Failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Custom success alert dengan copy functionality\n  const showOrderSuccessAlert = orderId => {\n    _s();\n    const customAlert = {\n      id: Date.now().toString(),\n      variant: 'success',\n      title: 'Order Placed Successfully!',\n      message: orderId,\n      autoClose: false,\n      // Jangan auto close\n      duration: 0\n    };\n\n    // Custom alert dengan tombol copy\n    const {\n      alerts: currentAlerts,\n      removeAlert: currentRemoveAlert\n    } = useAlert();\n\n    // Tambahkan alert ke state\n    const alertElement = /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed bottom-4 right-4 z-50 max-w-sm w-full\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-start gap-3 p-4 rounded-lg border shadow-lg backdrop-blur-sm bg-green-50 border-green-200 text-green-800\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-shrink-0 mt-0.5\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-5 h-5 text-green-400\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 371,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex-1 min-w-0\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-medium text-sm\",\n            children: \"Order Placed Successfully!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-2 p-2 bg-white rounded border\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-gray-600 mb-1\",\n              children: \"Order ID:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 379,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between\",\n              children: [/*#__PURE__*/_jsxDEV(\"code\", {\n                className: \"text-sm font-mono text-gray-800\",\n                children: orderId\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 381,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => copyToClipboard(orderId),\n                className: \"ml-2 p-1 text-green-600 hover:text-green-800 transition-colors\",\n                title: \"Copy to clipboard\",\n                children: /*#__PURE__*/_jsxDEV(\"svg\", {\n                  className: \"w-4 h-4\",\n                  fill: \"none\",\n                  stroke: \"currentColor\",\n                  viewBox: \"0 0 24 24\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 388,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 387,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 382,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 380,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs opacity-90 mt-2\",\n            children: \"You can track your order using this ID. Redirecting to orders page...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 376,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {},\n          className: \"flex-shrink-0 ml-2 p-1 rounded-md hover:bg-gray-100 transition-colors\",\n          children: /*#__PURE__*/_jsxDEV(\"svg\", {\n            className: \"w-4 h-4 text-gray-400 hover:text-gray-600\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            viewBox: \"0 0 24 24\",\n            children: /*#__PURE__*/_jsxDEV(\"path\", {\n              strokeLinecap: \"round\",\n              strokeLinejoin: \"round\",\n              strokeWidth: 2,\n              d: \"M6 18L18 6M6 6l12 12\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 401,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 7\n    }, this);\n\n    // Render custom alert (ini akan ditangani oleh state management yang lebih kompleks)\n    // Untuk sekarang, kita gunakan showSuccess biasa dengan informasi lengkap\n    showSuccess(`Your order has been placed successfully! Order ID: ${orderId}. Click here to copy the Order ID. You can track your order using this ID.`, \"Order Placed Successfully!\");\n  };\n  _s(showOrderSuccessAlert, \"OfYUPWI/pJD6XWRZIEkJO0ln670=\", false, function () {\n    return [useAlert];\n  });\n  if (cart.length === 0 && !loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-10 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 py-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-bold text-gray-900 mb-8\",\n        children: \"Checkout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 429,\n        columnNumber: 9\n      }, this), stockErrors.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6 bg-red-50 border border-red-200 rounded-md p-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-lg font-medium text-red-800\",\n            children: \"Stock Issues Detected\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: fixCartQuantities,\n            className: \"px-4 py-2 bg-red-600 text-white text-sm rounded-md hover:bg-red-700 transition-colors\",\n            children: \"Fix Cart\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 436,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"space-y-2\",\n          children: stockErrors.map((error, index) => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"text-sm text-red-700\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: [error.title, \":\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 19\n            }, this), \" \", error.message]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-sm text-red-600 mt-2\",\n          children: \"Click \\\"Fix Cart\\\" to automatically adjust quantities to available stock.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 lg:grid-cols-2 gap-8\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-lg p-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold text-gray-900 mb-6\",\n            children: \"Customer Information\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 459,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handlePlaceOrder,\n            className: \"space-y-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"grid grid-cols-1 md:grid-cols-2 gap-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"fullName\",\n                  className: \"block text-sm font-medium text-gray-700 mb-2\",\n                  children: \"Full Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 464,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  id: \"fullName\",\n                  name: \"fullName\",\n                  value: customerInfo.fullName,\n                  onChange: handleInputChange,\n                  placeholder: \"John Doe\",\n                  className: \"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 467,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 463,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  htmlFor: \"email\",\n                  className: \"block text-sm font-medium text-gray-700 mb-2\",\n                  children: \"Email\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 480,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"email\",\n                  id: \"email\",\n                  name: \"email\",\n                  value: customerInfo.email,\n                  onChange: handleInputChange,\n                  placeholder: \"john@example.com\",\n                  className: \"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 483,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 479,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 462,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"address\",\n                className: \"block text-sm font-medium text-gray-700 mb-2\",\n                children: \"Address\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 497,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                id: \"address\",\n                name: \"address\",\n                value: customerInfo.address,\n                onChange: handleInputChange,\n                placeholder: \"123 Main St, City, Country\",\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 500,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 496,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"phoneNumber\",\n                className: \"block text-sm font-medium text-gray-700 mb-2\",\n                children: \"Phone Number\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 513,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"tel\",\n                id: \"phoneNumber\",\n                name: \"phoneNumber\",\n                value: customerInfo.phoneNumber,\n                onChange: handleInputChange,\n                placeholder: \"+1 234 567 890\",\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 516,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 512,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              disabled: stockErrors.length > 0 || loading,\n              className: `w-full py-3 px-6 rounded-lg font-semibold transition-colors shadow-lg ${stockErrors.length > 0 || loading ? 'bg-gray-400 text-gray-700 cursor-not-allowed' : 'bg-purple-500 text-white hover:bg-purple-600'}`,\n              children: loading ? 'Processing Order...' : stockErrors.length > 0 ? 'Resolve Stock Issues First' : 'Place Order'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 528,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 458,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-white rounded-lg shadow-lg p-6 h-fit\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-xl font-semibold text-gray-900 mb-6\",\n            children: \"Order Summary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 545,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-4 mb-6\",\n            children: cart.map((item, index) => {\n              const backendProduct = products.find(p => p.id === item.id);\n              const hasStockError = stockErrors.some(error => error.id === item.id);\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `flex items-center justify-between py-3 border rounded-lg px-3 ${hasStockError ? 'border-red-300 bg-red-50' : 'border-gray-200'}`,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-3\",\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: item.image,\n                    alt: item.title,\n                    className: \"h-12 w-12 object-contain rounded border\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 558,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex-1\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                      className: \"text-sm font-medium text-gray-900 line-clamp-2\",\n                      children: item.title\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 564,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"flex items-center space-x-2 mt-1\",\n                      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => updateCartQuantity(item.id, item.quantity - 1),\n                        className: \"w-6 h-6 flex items-center justify-center border rounded text-sm hover:bg-gray-100\",\n                        children: \"\\u2212\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 568,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        className: \"text-sm text-gray-600 px-2\",\n                        children: item.quantity\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 574,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: () => updateCartQuantity(item.id, item.quantity + 1),\n                        className: \"w-6 h-6 flex items-center justify-center border rounded text-sm hover:bg-gray-100\",\n                        children: \"+\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 577,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 567,\n                      columnNumber: 25\n                    }, this), backendProduct && /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-xs text-gray-500 mt-1\",\n                      children: [\"Stock available: \", backendProduct.stock]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 585,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 563,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 557,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-right\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-sm font-semibold text-gray-900\",\n                    children: [\"$\", (item.price * item.quantity).toFixed(2)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 592,\n                    columnNumber: 23\n                  }, this), hasStockError && /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-xs text-red-600 mt-1\",\n                    children: \"Stock issue\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 596,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 591,\n                  columnNumber: 21\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 554,\n                columnNumber: 19\n              }, this);\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-3 border-t border-gray-200 pt-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between text-sm text-gray-600\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Subtotal\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 607,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold\",\n                children: [\"$\", calculateSubtotal()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 606,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between text-sm text-gray-600\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Shipping\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 612,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold text-green-600\",\n                children: \"Free\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 613,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 611,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between text-lg font-bold text-gray-900 border-t border-gray-200 pt-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Total\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 617,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-purple-600\",\n                children: [\"$\", totalCost]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 618,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 616,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 605,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-6 p-4 bg-blue-50 rounded-lg\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-sm font-semibold text-blue-900 mb-2\",\n              children: \"Order Status Information\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 624,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-xs text-blue-700\",\n              children: \"After placing your order, you will receive an Order ID that you can use to track your order status. Your order will initially be set to \\\"Pending\\\" and will be updated by our admin team as it progresses.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 625,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 623,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AlertContainer, {\n      alerts: alerts,\n      onRemoveAlert: removeAlert\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 635,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 427,\n    columnNumber: 5\n  }, this);\n};\n_s2(Checkout, \"s4ON66Ub2F3f7o3YM5qUgzzP1hE=\", false, function () {\n  return [useNavigate, useAlert];\n});\n_c = Checkout;\nexport default Checkout;\nvar _c;\n$RefreshReg$(_c, \"Checkout\");","map":{"version":3,"names":["useState","useEffect","useNavigate","useAlert","AlertContainer","jsxDEV","_jsxDEV","Checkout","_s2","_s","$RefreshSig$","cart","setCart","products","setProducts","stockErrors","setStockErrors","customerInfo","setCustomerInfo","fullName","email","address","phoneNumber","loading","setLoading","navigate","alerts","showSuccess","showError","showWarning","showInfo","removeAlert","API_BASE_URL","copyToClipboard","text","navigator","clipboard","writeText","err","textArea","document","createElement","value","body","appendChild","select","execCommand","removeChild","storedCart","JSON","parse","localStorage","getItem","length","setTimeout","fetchProducts","response","fetch","ok","Error","data","json","validateCartStock","error","console","cartItems","backendProducts","errors","forEach","cartItem","backendProduct","find","p","id","push","title","message","quantity","stock","requestedQty","availableStock","fixCartQuantities","updatedCart","map","filter","setItem","stringify","updateCartQuantity","productId","newQuantity","item","calculateSubtotal","reduce","total","price","toFixed","shippingCost","totalCost","parseFloat","handleInputChange","e","name","target","prev","generateOrderId","timestamp","Date","now","toString","random","Math","substr","toUpperCase","updateProductStock","newStock","method","headers","createOrder","orderData","handlePlaceOrder","preventDefault","currentProducts","finalValidation","currentProduct","join","window","location","reload","orderId","items","subtotal","shipping","status","statusHistory","toISOString","updatedBy","note","createdOrder","stockUpdatePromises","Promise","all","removeItem","finalOrderId","showOrderSuccessAlert","customAlert","variant","autoClose","duration","currentAlerts","currentRemoveAlert","alertElement","className","children","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","fileName","_jsxFileName","lineNumber","columnNumber","onClick","index","onSubmit","htmlFor","type","onChange","placeholder","required","disabled","hasStockError","some","src","image","alt","onRemoveAlert","_c","$RefreshReg$"],"sources":["D:/semester 6/pemweb/Tubes Pemweb/FE_ecommerce/src/pages/Checkout.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport useAlert from \"../hooks/useAlert\"; // Sesuaikan path\r\nimport AlertContainer from \"../components/ui/Alert\"; // Sesuaikan path\r\n\r\nconst Checkout = () => {\r\n  const [cart, setCart] = useState([]);\r\n  const [products, setProducts] = useState([]); // Products from backend\r\n  const [stockErrors, setStockErrors] = useState([]); // Track stock validation errors\r\n  const [customerInfo, setCustomerInfo] = useState({\r\n    fullName: \"\",\r\n    email: \"\",\r\n    address: \"\",\r\n    phoneNumber: \"\"\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  // Gunakan alert hook\r\n  const { alerts, showSuccess, showError, showWarning, showInfo, removeAlert } = useAlert();\r\n\r\n  const API_BASE_URL = 'http://localhost:6543/api'; // Adjust to your backend URL\r\n\r\n  // Fungsi untuk copy ke clipboard\r\n  const copyToClipboard = async (text) => {\r\n    try {\r\n      await navigator.clipboard.writeText(text);\r\n      showSuccess(\"Order ID copied to clipboard!\", \"Copied!\");\r\n    } catch (err) {\r\n      // Fallback untuk browser yang tidak support clipboard API\r\n      const textArea = document.createElement('textarea');\r\n      textArea.value = text;\r\n      document.body.appendChild(textArea);\r\n      textArea.select();\r\n      document.execCommand('copy');\r\n      document.body.removeChild(textArea);\r\n      showSuccess(\"Order ID copied to clipboard!\", \"Copied!\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const storedCart = JSON.parse(localStorage.getItem(\"cart\")) || [];\r\n    setCart(storedCart);\r\n\r\n    // Redirect if cart is empty\r\n    if (storedCart.length === 0) {\r\n      showWarning(\"Please add some products to your cart first.\", \"Cart is Empty\");\r\n      setTimeout(() => {\r\n        navigate(\"/products\");\r\n      }, 2000);\r\n      return;\r\n    }\r\n\r\n    // Fetch products from backend\r\n    fetchProducts();\r\n  }, [navigate]);\r\n\r\n  // Fetch products from backend\r\n  const fetchProducts = async () => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/products`);\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch products');\r\n      }\r\n      const data = await response.json();\r\n      setProducts(data.products);\r\n      \r\n      // Validate cart stock after fetching products\r\n      const storedCart = JSON.parse(localStorage.getItem(\"cart\")) || [];\r\n      validateCartStock(storedCart, data.products);\r\n    } catch (error) {\r\n      console.error('Error fetching products:', error);\r\n      showError('Error fetching product information. Please try again.', 'Network Error');\r\n    }\r\n  };\r\n\r\n  // Validate cart items against available stock\r\n  const validateCartStock = (cartItems, backendProducts) => {\r\n    const errors = [];\r\n    \r\n    cartItems.forEach(cartItem => {\r\n      const backendProduct = backendProducts.find(p => p.id === cartItem.id);\r\n      if (!backendProduct) {\r\n        errors.push({\r\n          id: cartItem.id,\r\n          title: cartItem.title,\r\n          message: \"Product is no longer available\"\r\n        });\r\n      } else if (cartItem.quantity > backendProduct.stock) {\r\n        errors.push({\r\n          id: cartItem.id,\r\n          title: cartItem.title,\r\n          requestedQty: cartItem.quantity,\r\n          availableStock: backendProduct.stock,\r\n          message: `Only ${backendProduct.stock} items available (you have ${cartItem.quantity} in cart)`\r\n        });\r\n      }\r\n    });\r\n    \r\n    setStockErrors(errors);\r\n    \r\n    if (errors.length > 0) {\r\n      showWarning(\"Some items in your cart have stock issues. Please review them before checkout.\", \"Stock Issues Detected\");\r\n    }\r\n  };\r\n\r\n  // Fix cart quantities to match available stock\r\n  const fixCartQuantities = () => {\r\n    const updatedCart = cart.map(cartItem => {\r\n      const backendProduct = products.find(p => p.id === cartItem.id);\r\n      if (backendProduct && cartItem.quantity > backendProduct.stock) {\r\n        return {\r\n          ...cartItem,\r\n          quantity: backendProduct.stock\r\n        };\r\n      }\r\n      return cartItem;\r\n    }).filter(cartItem => {\r\n      // Remove items that are no longer available\r\n      const backendProduct = products.find(p => p.id === cartItem.id);\r\n      return backendProduct && backendProduct.stock > 0;\r\n    });\r\n\r\n    setCart(updatedCart);\r\n    localStorage.setItem(\"cart\", JSON.stringify(updatedCart));\r\n    \r\n    // Re-validate after fixing\r\n    validateCartStock(updatedCart, products);\r\n    \r\n    if (updatedCart.length === 0) {\r\n      showError(\"All items in your cart are out of stock. Redirecting to products page.\", \"No Available Items\");\r\n      setTimeout(() => {\r\n        navigate(\"/products\");\r\n      }, 3000);\r\n    } else {\r\n      showSuccess(\"Cart quantities have been adjusted to match available stock.\", \"Cart Updated\");\r\n    }\r\n  };\r\n\r\n  // Update cart item quantity with stock validation\r\n  const updateCartQuantity = (productId, newQuantity) => {\r\n    const backendProduct = products.find(p => p.id === productId);\r\n    \r\n    if (!backendProduct) {\r\n      showError(\"This product is no longer available.\", \"Product Unavailable\");\r\n      return;\r\n    }\r\n    \r\n    if (newQuantity > backendProduct.stock) {\r\n      showWarning(`Sorry, only ${backendProduct.stock} items are available in stock.`, \"Insufficient Stock\");\r\n      return;\r\n    }\r\n    \r\n    if (newQuantity <= 0) {\r\n      // Remove item from cart\r\n      const updatedCart = cart.filter(item => item.id !== productId);\r\n      setCart(updatedCart);\r\n      localStorage.setItem(\"cart\", JSON.stringify(updatedCart));\r\n      validateCartStock(updatedCart, products);\r\n      showInfo(\"Item removed from cart.\", \"Item Removed\");\r\n      return;\r\n    }\r\n\r\n    const updatedCart = cart.map(item => \r\n      item.id === productId ? { ...item, quantity: newQuantity } : item\r\n    );\r\n    \r\n    setCart(updatedCart);\r\n    localStorage.setItem(\"cart\", JSON.stringify(updatedCart));\r\n    validateCartStock(updatedCart, products);\r\n  };\r\n\r\n  // Calculate subtotal and total\r\n  const calculateSubtotal = () => {\r\n    return cart.reduce((total, item) => total + (item.price * item.quantity), 0).toFixed(2);\r\n  };\r\n\r\n  const shippingCost = 0;\r\n  const totalCost = (parseFloat(calculateSubtotal()) + shippingCost).toFixed(2);\r\n\r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setCustomerInfo(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n\r\n  // Generate unique order ID\r\n  const generateOrderId = () => {\r\n    const timestamp = Date.now().toString();\r\n    const random = Math.random().toString(36).substr(2, 9);\r\n    return `ORD-${timestamp.substr(-8)}-${random.toUpperCase()}`;\r\n  };\r\n\r\n  // Update product stock in backend\r\n  const updateProductStock = async (productId, newStock) => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/products/${productId}`, {\r\n        method: 'PUT',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          stock: newStock\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to update product stock');\r\n      }\r\n\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error('Error updating product stock:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  // Create order in backend\r\n  const createOrder = async (orderData) => {\r\n    try {\r\n      const response = await fetch(`${API_BASE_URL}/orders`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(orderData)\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to create order');\r\n      }\r\n\r\n      return await response.json();\r\n    } catch (error) {\r\n      console.error('Error creating order:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const handlePlaceOrder = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    // Check if there are any stock errors\r\n    if (stockErrors.length > 0) {\r\n      showError(\"Please resolve stock issues before placing your order. Use the 'Fix Cart' button to automatically adjust quantities.\", \"Stock Issues Detected\");\r\n      return;\r\n    }\r\n    \r\n    // Validate form\r\n    if (!customerInfo.fullName || !customerInfo.email || !customerInfo.address || !customerInfo.phoneNumber) {\r\n      showWarning(\"Please fill in all required fields.\", \"Incomplete Information\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    showInfo(\"Processing your order...\", \"Please Wait\");\r\n\r\n    try {\r\n      // Final stock validation before placing order\r\n      const response = await fetch(`${API_BASE_URL}/products`);\r\n      if (!response.ok) {\r\n        throw new Error('Failed to fetch current stock');\r\n      }\r\n      const { products: currentProducts } = await response.json();\r\n      \r\n      const finalValidation = [];\r\n      cart.forEach(cartItem => {\r\n        const currentProduct = currentProducts.find(p => p.id === cartItem.id);\r\n        if (!currentProduct || cartItem.quantity > currentProduct.stock) {\r\n          finalValidation.push(cartItem.title);\r\n        }\r\n      });\r\n\r\n      if (finalValidation.length > 0) {\r\n        showError(`Stock has changed for: ${finalValidation.join(', ')}. Please refresh and try again.`, \"Stock Changed\");\r\n        setTimeout(() => {\r\n          window.location.reload();\r\n        }, 3000);\r\n        return;\r\n      }\r\n\r\n      // Generate unique order ID\r\n      const orderId = generateOrderId();\r\n\r\n      // Prepare order data for backend\r\n      const orderData = {\r\n        orderId: orderId,\r\n        customerInfo: {\r\n          fullName: customerInfo.fullName,\r\n          email: customerInfo.email,\r\n          address: customerInfo.address,\r\n          phoneNumber: customerInfo.phoneNumber\r\n        },\r\n        items: cart.map(item => ({\r\n          id: item.id,\r\n          title: item.title,\r\n          quantity: item.quantity,\r\n          price: item.price\r\n        })),\r\n        subtotal: parseFloat(calculateSubtotal()),\r\n        shipping: shippingCost,\r\n        total: parseFloat(totalCost),\r\n        status: 'pending',\r\n        statusHistory: [\r\n          {\r\n            status: 'pending',\r\n            timestamp: new Date().toISOString(),\r\n            updatedBy: 'system',\r\n            note: 'Order placed by customer'\r\n          }\r\n        ]\r\n      };\r\n\r\n      // Create order in backend\r\n      const createdOrder = await createOrder(orderData);\r\n\r\n      // Update product stock for each item in the cart\r\n      const stockUpdatePromises = cart.map(async (cartItem) => {\r\n        const currentProduct = currentProducts.find(p => p.id === cartItem.id);\r\n        if (currentProduct) {\r\n          const newStock = currentProduct.stock - cartItem.quantity;\r\n          return updateProductStock(cartItem.id, newStock);\r\n        }\r\n      });\r\n\r\n      // Wait for all stock updates to complete\r\n      await Promise.all(stockUpdatePromises);\r\n\r\n      // Clear cart from localStorage\r\n      localStorage.removeItem(\"cart\");\r\n      \r\n      // Show success alert with copy feature\r\n      const finalOrderId = createdOrder.orderId || orderId;\r\n      showOrderSuccessAlert(finalOrderId);\r\n      \r\n      setTimeout(() => {\r\n        navigate(\"/orders\");\r\n      }, 5000);\r\n\r\n    } catch (error) {\r\n      console.error('Error placing order:', error);\r\n      showError('Failed to place order. Please try again.', 'Order Failed');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Custom success alert dengan copy functionality\r\n  const showOrderSuccessAlert = (orderId) => {\r\n    const customAlert = {\r\n      id: Date.now().toString(),\r\n      variant: 'success',\r\n      title: 'Order Placed Successfully!',\r\n      message: orderId,\r\n      autoClose: false, // Jangan auto close\r\n      duration: 0\r\n    };\r\n    \r\n    // Custom alert dengan tombol copy\r\n    const { alerts: currentAlerts, removeAlert: currentRemoveAlert } = useAlert();\r\n    \r\n    // Tambahkan alert ke state\r\n    const alertElement = (\r\n      <div className=\"fixed bottom-4 right-4 z-50 max-w-sm w-full\">\r\n        <div className=\"flex items-start gap-3 p-4 rounded-lg border shadow-lg backdrop-blur-sm bg-green-50 border-green-200 text-green-800\">\r\n          {/* Success Icon */}\r\n          <div className=\"flex-shrink-0 mt-0.5\">\r\n            <svg className=\"w-5 h-5 text-green-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n            </svg>\r\n          </div>\r\n          \r\n          {/* Content */}\r\n          <div className=\"flex-1 min-w-0\">\r\n            <h4 className=\"font-medium text-sm\">Order Placed Successfully!</h4>\r\n            <div className=\"mt-2 p-2 bg-white rounded border\">\r\n              <p className=\"text-xs text-gray-600 mb-1\">Order ID:</p>\r\n              <div className=\"flex items-center justify-between\">\r\n                <code className=\"text-sm font-mono text-gray-800\">{orderId}</code>\r\n                <button\r\n                  onClick={() => copyToClipboard(orderId)}\r\n                  className=\"ml-2 p-1 text-green-600 hover:text-green-800 transition-colors\"\r\n                  title=\"Copy to clipboard\"\r\n                >\r\n                  <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\" />\r\n                  </svg>\r\n                </button>\r\n              </div>\r\n            </div>\r\n            <p className=\"text-xs opacity-90 mt-2\">You can track your order using this ID. Redirecting to orders page...</p>\r\n          </div>\r\n          \r\n          {/* Close Button */}\r\n          <button\r\n            onClick={() => {}}\r\n            className=\"flex-shrink-0 ml-2 p-1 rounded-md hover:bg-gray-100 transition-colors\"\r\n          >\r\n            <svg className=\"w-4 h-4 text-gray-400 hover:text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n            </svg>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n\r\n    // Render custom alert (ini akan ditangani oleh state management yang lebih kompleks)\r\n    // Untuk sekarang, kita gunakan showSuccess biasa dengan informasi lengkap\r\n    showSuccess(\r\n      `Your order has been placed successfully! Order ID: ${orderId}. Click here to copy the Order ID. You can track your order using this ID.`,\r\n      \"Order Placed Successfully!\"\r\n    );\r\n  };\r\n\r\n  if (cart.length === 0 && !loading) {\r\n    return (\r\n      <div className=\"p-10 text-center\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4\"></div>\r\n        <p>Loading...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50 py-8\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-8\">Checkout</h1>\r\n        \r\n        {/* Stock Error Notifications */}\r\n        {stockErrors.length > 0 && (\r\n          <div className=\"mb-6 bg-red-50 border border-red-200 rounded-md p-4\">\r\n            <div className=\"flex items-center justify-between mb-3\">\r\n              <h3 className=\"text-lg font-medium text-red-800\">Stock Issues Detected</h3>\r\n              <button\r\n                onClick={fixCartQuantities}\r\n                className=\"px-4 py-2 bg-red-600 text-white text-sm rounded-md hover:bg-red-700 transition-colors\"\r\n              >\r\n                Fix Cart\r\n              </button>\r\n            </div>\r\n            <ul className=\"space-y-2\">\r\n              {stockErrors.map((error, index) => (\r\n                <li key={index} className=\"text-sm text-red-700\">\r\n                  <strong>{error.title}:</strong> {error.message}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n            <p className=\"text-sm text-red-600 mt-2\">\r\n              Click \"Fix Cart\" to automatically adjust quantities to available stock.\r\n            </p>\r\n          </div>\r\n        )}\r\n        \r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n          {/* Customer Information Section */}\r\n          <div className=\"bg-white rounded-lg shadow-lg p-6\">\r\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Customer Information</h2>\r\n            \r\n            <form onSubmit={handlePlaceOrder} className=\"space-y-6\">\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                <div>\r\n                  <label htmlFor=\"fullName\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Full Name\r\n                  </label>\r\n                  <input\r\n                    type=\"text\"\r\n                    id=\"fullName\"\r\n                    name=\"fullName\"\r\n                    value={customerInfo.fullName}\r\n                    onChange={handleInputChange}\r\n                    placeholder=\"John Doe\"\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n                    required\r\n                  />\r\n                </div>\r\n                \r\n                <div>\r\n                  <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Email\r\n                  </label>\r\n                  <input\r\n                    type=\"email\"\r\n                    id=\"email\"\r\n                    name=\"email\"\r\n                    value={customerInfo.email}\r\n                    onChange={handleInputChange}\r\n                    placeholder=\"john@example.com\"\r\n                    className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n                    required\r\n                  />\r\n                </div>\r\n              </div>\r\n              \r\n              <div>\r\n                <label htmlFor=\"address\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Address\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"address\"\r\n                  name=\"address\"\r\n                  value={customerInfo.address}\r\n                  onChange={handleInputChange}\r\n                  placeholder=\"123 Main St, City, Country\"\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n                  required\r\n                />\r\n              </div>\r\n              \r\n              <div>\r\n                <label htmlFor=\"phoneNumber\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Phone Number\r\n                </label>\r\n                <input\r\n                  type=\"tel\"\r\n                  id=\"phoneNumber\"\r\n                  name=\"phoneNumber\"\r\n                  value={customerInfo.phoneNumber}\r\n                  onChange={handleInputChange}\r\n                  placeholder=\"+1 234 567 890\"\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\r\n                  required\r\n                />\r\n              </div>\r\n              \r\n              <button\r\n                type=\"submit\"\r\n                disabled={stockErrors.length > 0 || loading}\r\n                className={`w-full py-3 px-6 rounded-lg font-semibold transition-colors shadow-lg ${\r\n                  stockErrors.length > 0 || loading\r\n                    ? 'bg-gray-400 text-gray-700 cursor-not-allowed'\r\n                    : 'bg-purple-500 text-white hover:bg-purple-600'\r\n                }`}\r\n              >\r\n                {loading ? 'Processing Order...' : \r\n                 stockErrors.length > 0 ? 'Resolve Stock Issues First' : 'Place Order'}\r\n              </button>\r\n            </form>\r\n          </div>\r\n\r\n          {/* Order Summary Section */}\r\n          <div className=\"bg-white rounded-lg shadow-lg p-6 h-fit\">\r\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-6\">Order Summary</h2>\r\n            \r\n            {/* Cart Items */}\r\n            <div className=\"space-y-4 mb-6\">\r\n              {cart.map((item, index) => {\r\n                const backendProduct = products.find(p => p.id === item.id);\r\n                const hasStockError = stockErrors.some(error => error.id === item.id);\r\n                \r\n                return (\r\n                  <div key={index} className={`flex items-center justify-between py-3 border rounded-lg px-3 ${\r\n                    hasStockError ? 'border-red-300 bg-red-50' : 'border-gray-200'\r\n                  }`}>\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <img \r\n                        src={item.image} \r\n                        alt={item.title} \r\n                        className=\"h-12 w-12 object-contain rounded border\"\r\n                      />\r\n                      <div className=\"flex-1\">\r\n                        <h3 className=\"text-sm font-medium text-gray-900 line-clamp-2\">\r\n                          {item.title}\r\n                        </h3>\r\n                        <div className=\"flex items-center space-x-2 mt-1\">\r\n                          <button\r\n                            onClick={() => updateCartQuantity(item.id, item.quantity - 1)}\r\n                            className=\"w-6 h-6 flex items-center justify-center border rounded text-sm hover:bg-gray-100\"\r\n                          >\r\n                            −\r\n                          </button>\r\n                          <span className=\"text-sm text-gray-600 px-2\">\r\n                            {item.quantity}\r\n                          </span>\r\n                          <button\r\n                            onClick={() => updateCartQuantity(item.id, item.quantity + 1)}\r\n                            className=\"w-6 h-6 flex items-center justify-center border rounded text-sm hover:bg-gray-100\"\r\n                          >\r\n                            +\r\n                          </button>\r\n                        </div>\r\n                        {backendProduct && (\r\n                          <p className=\"text-xs text-gray-500 mt-1\">\r\n                            Stock available: {backendProduct.stock}\r\n                          </p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"text-right\">\r\n                      <p className=\"text-sm font-semibold text-gray-900\">\r\n                        ${(item.price * item.quantity).toFixed(2)}\r\n                      </p>\r\n                      {hasStockError && (\r\n                        <p className=\"text-xs text-red-600 mt-1\">Stock issue</p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n\r\n            {/* Order Totals */}\r\n            <div className=\"space-y-3 border-t border-gray-200 pt-4\">\r\n              <div className=\"flex justify-between text-sm text-gray-600\">\r\n                <span>Subtotal</span>\r\n                <span className=\"font-semibold\">${calculateSubtotal()}</span>\r\n              </div>\r\n              \r\n              <div className=\"flex justify-between text-sm text-gray-600\">\r\n                <span>Shipping</span>\r\n                <span className=\"font-semibold text-green-600\">Free</span>\r\n              </div>\r\n              \r\n              <div className=\"flex justify-between text-lg font-bold text-gray-900 border-t border-gray-200 pt-3\">\r\n                <span>Total</span>\r\n                <span className=\"text-purple-600\">${totalCost}</span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Order Status Info */}\r\n            <div className=\"mt-6 p-4 bg-blue-50 rounded-lg\">\r\n              <h3 className=\"text-sm font-semibold text-blue-900 mb-2\">Order Status Information</h3>\r\n              <p className=\"text-xs text-blue-700\">\r\n                After placing your order, you will receive an Order ID that you can use to track your order status. \r\n                Your order will initially be set to \"Pending\" and will be updated by our admin team as it progresses.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Alert Container */}\r\n      <AlertContainer alerts={alerts} onRemoveAlert={removeAlert} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Checkout;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}